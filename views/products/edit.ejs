<% layout('boilerplates/default')%>

<div class="row d-flex">
	<h1 class="text-center my-4">Edit Product</h1>
	<form class="col-6 offset-3 form-validate" action="/products/<%=product.id%>?_method=PUT" method="POST" enctype="multipart/form-data" novalidate>
		<div class="mb-3">
			<label class="form-label" for="title" ">Title</label>
			<input class="form-control mb-3 text-muted" type="text" name="product[title]" id="title" value="<%=product.title%>"  required />
			<div class="valid-feedback">
				Looks Good!
			</div>
			<div class="invalid-feedback">
				Title is required!
			</div>
		</div class="mb-3">
		<div class="mb-3">
			<label class="form-label for="description" ">Description</label>
			<textarea class="form-control text-muted" type="text" name="product[description]" id="description"  maxlength="500" placeholder="Maximum 500 characters..." required /><%=product.description%></textarea>
			<div class="valid-feedback">
				Looks Good!
			</div>
			<div class="invalid-feedback">
				Description is required!
			</div>
		</div class="mb-3">
        <div class="mb-3">
			<label class="form-label for="image" ">Add Images</label>
			<input class="form-control" type="file" name="product[image]" id="image"  multiple/>
		</div class="mb-3">
		<div class="mb-3">
			<label class="form-label for="price" ">Price</label>
		<div class="input-group">
			<span id="basic-addon1">
				<select class="form-select" name="product[currency]">
					<option value="€">€</option>
					<option value="$">$</option>
					<option value="₾">₾</option>
				</select>
			</span>
			<input type="number" class="form-control text-muted" name="product[price]" id="price" placeholder="0.00" aria-label="Price" aria-describedby="basic-addon1" value="<%=product.price%>" required >
			<div class="valid-feedback">
				Looks Good!
			</div>
			<div class="invalid-feedback">
				Price is required!
			</div>
		  </div>
		</div>
		<h6>Delete Images</h6>
		<div class="row row-cols-1 row-cols-md-4 g-3 mb-3">
			<% product.images.map((img,i)=> {%>
				<div class="col">
					<div class="card">

						<img src="<%= img.thumbnail%>" alt="" class="img-thumbnail">
						<div class="card-img-overlay text-end pt-1 pe-2">
							<label class="visually-hidden" for="image-<%= i %>">Delete Image</label>
							<input class="form-check-input" type="checkbox" name="deleteImages[]" id="img-<%=i%>" value="<%=img.filename%>">
						</div> 
					</div>
				</div>
			<% }) %>  
		</div>
				
		<div class="mt-3">
			<button class="btn btn-success">Done</button>
			<a class="btn btn-danger" href="/products/<%=product.id%>">Cancel</a>

		</div>
	</form>
</div>