<% layout('boilerplates/default')%>

<article class="row mb-3">
	<div class="col-6">
		<div class="card">
			<img src="<%= product.image %> " class="card-img-top my-4" alt="..." />
			<div class="card-body">
				<h1 class="card-title fs-3"><%= product.title %></h1>
				<p class="card-text"><%= product.description %></p>
			</div>
			<ul class="list-group list-group-flush">
				<li class="list-group-item">
					<%= product.currency %> <%= product.price %>
				</li>
				<li class="list-group-item">Kutuzavri</li>
			</ul>
			<div class="card-body">
				<a
					class="btn btn-dark card-link text-center"
					href="/products/<%=product.id%>/edit"
					>Edit</a
				>
				<form
					action="/products/<%=product.id%>?_method=DELETE"
					method="post"
					class="d-inline"
				>
					<button class="btn btn-danger card-link d-inline">Delete</button>
				</form>
			</div>
		</div>
	</div>
	<div class="col-6">
		 <% if (product.reviews.length > 0){ %>
		<h3 class="mb-3">Reviews:</h3>
		<% } %> <% for (let review of product.reviews) { %>
		<div class="card mb-3">
			<div class="card-body">
				<p class="starability-result" data-rating="<%=review.rating%>">
					Rated: <%=review.rating%> stars
				</p>
				<h6 class="card-subtitle mb-2">Review:</h6>
				<p class="card-text"><%= review.body %></p>
			</div>
			

			<form
				action="/products/<%=product.id%>/reviews/<%=review.id%>?_method=DELETE"
				method="POST"
			>
				<button class="btn btn-danger btn-sm" type="submit">Delete</button>
			</form>
		</div>
		<% } %>
		<h2 class="my-3">Leave a Review</h2>
		<form
			action="/products/<%= product.id %>/reviews"
			method="POST"
			class="mb-3 form-validate"
			novalidate
		>
		<div class="mb-3">
			<fieldset class="starability-basic">
				<!-- <legend>First rating:</legend> -->
				<input
					type="radio"
					id="no-rate"
					class="input-no-rate"
					name="review[rating]"
					value="0"
					checked
					aria-label="No rating."
				/>
				<input
					type="radio"
					id="first-rate1"
					name="review[rating]"
					value="1"
				/>
				<label for="first-rate1" title="Terrible">1 star</label>
				<input
					type="radio"
					id="first-rate2"
					name="review[rating]"
					value="2"
				/>
				<label for="first-rate2" title="Not good">2 stars</label>
				<input
					type="radio"
					id="first-rate3"
					name="review[rating]"
					value="3"
				/>
				<label for="first-rate3" title="Average">3 stars</label>
				<input
					type="radio"
					id="first-rate4"
					name="review[rating]"
					value="4"
				/>
				<label for="first-rate4" title="Very good">4 stars</label>
				<input
					type="radio"
					id="first-rate5"
					name="review[rating]"
					value="5"
				/>
				<label for="first-rate5" title="Amazing">5 stars</label>
			</fieldset>
		</div>
		<div class="mb-3">
			<label class="form-label" for="body">Review</label>
			<textarea
				name="review[body]"
				id="body"
				cols="30"
				rows="3"
				class="form-control"
				required
				style="resize: none"
			></textarea>
			<div class="valid-feedback">Looks Good!</div>
		</div>
		<button class="btn btn-success">Submit</button>
	</form>
</article>
